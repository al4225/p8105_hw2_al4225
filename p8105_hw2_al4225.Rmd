---
title: "p8105_HW2_al4225.Rmd"
author: "Anjing"
date: "2022-10-03"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Problem 2

### Mr. Trash Wheel dataset

Read and clean the Mr. Trash Wheel sheet:

1. specify the sheet in the Excel file and to omit non-data entries (rows with notes / figures; columns containing notes) using arguments in read_excel
2. use reasonable variable names
3. omit rows that do not include dumpster-specific data
4. round the number of sports balls to the nearest integer and converts the result to an integer variable (using as.integer)
```{r}
library(tidyverse)
library(readxl)
Mr_data = read_excel("./data/updated_p2.xlsx",
                     sheet = "Mr. Trash Wheel",
                     range = "A2:N550",
                     col_names = TRUE) %>%
janitor::clean_names() %>%
drop_na() %>%
mutate(sports_balls = as.integer(round(sports_balls, digits = 0)), 
       dumpster = as.numeric(dumpster), 
       year = as.numeric(year), 
       homes_powered = as.integer(round(homes_powered, digits = 0)), 
       name = "mr. trash wheel") %>%
select(name, everything())
Mr_data
```


### Professor Trash Wheel dataset
Use a similar process to import, clean, and organize the data for Professor Trash Wheel.
```{r}
library(tidyverse)
library(readxl)
Professor_data = read_excel("./data/updated_p2.xlsx",
                     sheet = "Professor Trash Wheel",
                     range = "A2:M97",
                     col_names = TRUE) %>%

drop_na() %>%
janitor::clean_names() %>%
mutate(homes_powered = as.integer(round(homes_powered, digits = 0)), 
       name = "professor trash wheel") %>%
select(name, everything())
Professor_data
```


### Combine the two datasets. 
To keep track of which Trash Wheel is which, I added an additional variable "name" before combining.

According to the wheel_data dataset, there are `r wheel_data = 
  bind_rows(Mr_data, Professor_data) %>%
  janitor::clean_names() 
nrow(wheel_data) ` observations in wheel_data. Every observation represents a dumpster. There are `r wheel_data = 
  bind_rows(Mr_data, Professor_data) %>%
  janitor::clean_names() 
ncol(wheel_data)` variables in the dataset including the new column "name" I added. Key variables such as the 2 kinds of trash wheels, dumpster number, date, amount of trash they collected in weight and volumes, types of trash such as bottles, polystyrene, cigarette and bags, and the homes they powered are in the dataset. 
```{r}
wheel_data = 
  bind_rows(Mr_data, Professor_data) %>%
  janitor::clean_names() 
nrow(wheel_data) 
ncol(wheel_data)
wheel_data
```

The total number of sports balls collected by Mr. Trash Wheel in 2020 is `r Mr_data %>%
  filter(year == "2020") %>%
  select(sports_balls) %>%
  colSums()`
```{r}
wheel_data %>%
  filter(name == "mr. trash wheel", year == "2020") %>%
  select(sports_balls) %>%
  colSums()
```

The total weight of trash collected by Professor Trash Wheel is `r wheel_data %>%
  filter(name == "professor trash wheel") %>%
  select(weight_tons) %>%
  colSums()`
```{r}
wheel_data %>%
  filter(name == "professor trash wheel") %>%
  select(weight_tons) %>%
  colSums()
```

